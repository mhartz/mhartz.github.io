<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Ar JS</title>
  <script src="https://aframe.io/releases/0.9.2/aframe.min.js"></script>
  <script src="https://jeromeetienne.github.io/AR.js/aframe/build/aframe-ar.js"></script>
  <script>
    AFRAME.registerComponent('cloak', {
      init: function() {
        var geometry = new THREE.BoxGeometry(1.1, 1.5, 1.1 );
        var material = new THREE.MeshBasicMaterial({colorWrite: false});
        var cube = new THREE.Mesh(geometry, material);
        this.el.object3D.add(cube);
      }
    });

    document.addEventListener('click', function() {
      var plane = document.getElementById('plane-animate');
      var tower = document.getElementById('tower-animate');

      plane.setAttribute('animation', 'property: width; from: 0; to: 2.3; dur: 1000; easing: linear');

      setTimeout(function() {
        tower.setAttribute('animation', "property: position; to: 0 1.1 0; dur: 1000; easing: linear");
      }, 1000);
    });
  </script>
</head>
<body style='margin : 0px; overflow: hidden;'>
  <a-scene embedded arjs>
    <a-marker type='pattern' url='./assets/patterns/arjs.patt'>
      <a-entity position='0 -1 0' cloak></a-entity>
      <a-plane width='0' height='1.3' rotation='270 0 0' id='plane-animate' position='0 0 0' color='#000'></a-plane>
      <a-box scale="0.5 1.5 0.5" id='tower-animate' position="0 -1.1 0" rotation="0 45 0" color="#4CC3D9"></a-box>
    </a-marker>

    <a-entity camera></a-entity>
  </a-scene>
</body>
</html>
